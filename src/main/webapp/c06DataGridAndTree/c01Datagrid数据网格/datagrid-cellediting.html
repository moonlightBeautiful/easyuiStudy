<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Cell Editing in DataGrid - jQuery EasyUI Demo</title>
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.4.2/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.4.2/themes/icon.css">
    <script type="text/javascript" src="../../jquery-easyui-1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.4.2/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.4.2/locale/easyui-lang-zh_CN.js"></script>
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.4.2/demo/demo.css">
    <script type="text/javascript" src="./datagrid-cellediting.js"></script>
    <script type="text/javascript">
        var data = {
            "total": 28, "rows": [
                {
                    "productid": "FI-SW-01",
                    "productname": "Koi",
                    "unitcost": 10.00,
                    "status": "P",
                    "listprice": 36.50,
                    "attr1": "Large",
                    "itemid": "EST-1"
                },
                {
                    "productid": "K9-DL-01",
                    "productname": "Dalmation",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 18.50,
                    "attr1": "Spotted Adult Female",
                    "itemid": "EST-10"
                },
                {
                    "productid": "RP-SN-01",
                    "productname": "Rattlesnake",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 38.50,
                    "attr1": "Venomless",
                    "itemid": "EST-11"
                },
                {
                    "productid": "RP-SN-01",
                    "productname": "Rattlesnake",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 26.50,
                    "attr1": "Rattleless",
                    "itemid": "EST-12"
                },
                {
                    "productid": "RP-LI-02",
                    "productname": "Iguana",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 35.50,
                    "attr1": "Green Adult",
                    "itemid": "EST-13"
                },
                {
                    "productid": "FL-DSH-01",
                    "productname": "Manx",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 158.50,
                    "attr1": "Tailless",
                    "itemid": "EST-14"
                },
                {
                    "productid": "FL-DSH-01",
                    "productname": "Manx",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 83.50,
                    "attr1": "With tail",
                    "itemid": "EST-15"
                },
                {
                    "productid": "FL-DLH-02",
                    "productname": "Persian",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 23.50,
                    "attr1": "Adult Female",
                    "itemid": "EST-16"
                },
                {
                    "productid": "FL-DLH-02",
                    "productname": "Persian",
                    "unitcost": 12.00,
                    "status": "P",
                    "listprice": 89.50,
                    "attr1": "Adult Male",
                    "itemid": "EST-17"
                },
                {
                    "productid": "AV-CB-01",
                    "productname": "Amazon Parrot",
                    "unitcost": 92.00,
                    "status": "P",
                    "listprice": 63.50,
                    "attr1": "Adult Male",
                    "itemid": "EST-18"
                }
            ]
        };

        $(function () {
            $('#dg').datagrid({
                data: data
            }).datagrid('enableCellEditing').datagrid('gotoCell', {
                index: 0,
                field: 'productid'
            });
        });
    </script>
</head>
<body>
<h2>Cell Editing in DataGrid</h2>
<p>Click a cell to start editing.</p>
<table id="dg" title="Cell Editing in DataGrid" style="height:200px" data-options="onClickRow:onClickRow1,onLoadSuccess:onLoadSuccess1">
    <thead>
    <tr>
        <th data-options="field:'itemid',width:100">Item ID</th>
        <th data-options="field:'productid',width:100,editor:'text'">Product Id</th>
        <th data-options="field:'productname',width:100,editor:'text'">productname</th>
        <th data-options="field:'listprice',width:80,align:'right',editor:{type:'numberbox',options:{precision:1}}">List
            Price
        </th>
        <th data-options="field:'unitcost',width:80,align:'right',editor:'numberbox'">Unit Cost</th>
        <th data-options="field:'attr1',width:250">Attribute</th>
        <th data-options="field:'status',width:60,align:'center',editor:{type:'checkbox',options:{on:'P',off:''}}">
            Status
        </th>
        <th data-options="field:'productId',width:250,editor:
                                        { type:'combobox',options:
                                                {valueField:'productId',textField:'productName',
                                                 url:'./products.json',required:true}}">产品别名
        </th>
        <th data-options="field:'操作',width:110,align:'center',formatter:formatterOp">操作</th>
    </tr>
    </thead>
</table>
</body>
</html>
<script>
    $(function () {
       /* alert(JSON.stringify($('#dg').datagrid("getRows")[0]));*/
    });

    function onClickRow1(rowIndex, rowData) {
       /* alert(JSON.stringify(rowData));*/
    }
    function formatterOp(value, row, index) {
        var str = '<a href="#" name="opera" class="easyui-linkbutton" onclick="javascripet:doOrder('+index+')">下订单</a>';
        return str;
    }
    function onLoadSuccess1(data) {
        $("a[name='opera']").linkbutton({text:'下订单',plain:true,iconCls:'icon-add'});
    }
    function doOrder(index) {
        alert(JSON.stringify($('#dg').datagrid("getRows")[index]));
    }

</script>