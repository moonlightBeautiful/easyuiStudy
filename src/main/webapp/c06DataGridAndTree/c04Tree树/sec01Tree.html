<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>树（Tree）组件的学习</title>
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.7.0/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.7.0/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.7.0/demo/demo.css">
    <script type="text/javascript" src="../../jquery-easyui-1.7.0/jquery.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.7.0/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.7.0/locale/easyui-lang-zh_CN.js"></script>
</head>
<body>

<h2>基本 树（Tree）组件</h2>
<div class="demo-info" style="font-size:20px;margin: 10px">
    <div class="demo-tip icon-tip"></div>
    <div>创建方式1.现有的ul转换为树</div>
</div>
<ul class="easyui-tree">
    <li data-options="state:'closed'">
        <span>My Documents</span>
        <ul>
            <li data-options="state:'closed'">
                <span>Photos</span>
                <ul>
                    <li>
                        <span>Friend</span>
                    </li>
                    <li>
                        <span>Wife</span>
                    </li>
                    <li>
                        <span>Company</span>
                    </li>
                </ul>
            </li>
            <li>
                <span>Program Files</span>
                <ul>
                    <li>Intel</li>
                    <li>Java</li>
                    <li>Microsoft Office</li>
                    <li>Games</li>
                </ul>
            </li>
            <li>index.html</li>
            <li>about.html</li>
            <li>welcome.html</li>
        </ul>
    </li>
</ul>

<div class="demo-info" style="font-size:20px;margin: 10px">
    <div class="demo-tip icon-tip"></div>
    <div>创建方式2.空ul创建</div>
</div>
<div style="margin:10px;">
    <div style="margin:10px 0;">
        <a href="#" class="easyui-linkbutton" onclick="collapseAll()">收缩所有</a>
        <a href="#" class="easyui-linkbutton" onclick="expandAll()">展开所有</a>
        <a href="#" class="easyui-linkbutton" onclick="expandTo()">展开到Company</a>
        <a href="#" class="easyui-linkbutton" onclick="getSelected()">获取选中节点</a>
    </div>
    <input type="checkbox" onchange="$('#tt').tree({checkbox:$(this).is(':checked')})">显示复选框
    <input type="checkbox" checked onchange="$('#tt').tree({cascadeCheck:$(this).is(':checked')})">级联选中
    <input type="checkbox" onchange="$('#tt').tree({onlyLeafCheck:$(this).is(':checked')})">只有叶子节点有复选框
    <div style="margin:10px 0;">
        <a href="#" class="easyui-linkbutton" onclick="getChecked()">获取复选框选中值</a>
    </div>
    <div style="margin:10px 0;">
        不用配置编辑器，默认的编辑器就是text
    </div>
</div>
<ul id="tt" class="easyui-tree" data-options="
                                        url:'./tree_data1.json',
                                        animate:true,
                                        lines:true,
                                        onContextMenu: function(e,node){
                                            e.preventDefault();
                                            $(this).tree('select',node.target);
                                            $('#mm').menu('show',{
                                                left: e.pageX,
                                                top: e.pageY
                                             });
                                        },
                                        dnd:true,
                                        onClick: function(node){
                                            $(this).tree('beginEdit',node.target);
                                        }
                            "></ul>
<div id="mm" class="easyui-menu" style="width:120px;">
    <div onclick="append()" data-options="iconCls:'icon-add'">添加</div>
    <div onclick="remove()" data-options="iconCls:'icon-remove'">删除</div>
    <div class="menu-sep"></div>
    <div onclick="expand()">展开</div>
    <div onclick="collapse()">收缩</div>
</div>
<script type="text/javascript">
    function collapseAll() {
        $('#tt').tree('collapseAll');
    }

    function expandAll() {
        $('#tt').tree('expandAll');
    }

    function expandTo() {
        var node = $('#tt').tree('find', 113);
        $('#tt').tree('expandTo', node.target).tree('select', node.target);
    }

    function getSelected() {
        var node = $('#tt').tree('getSelected');
        if (node) {
            var s = node.text;
            if (node.attributes) {
                s += "," + node.attributes.url + "," + node.attributes.price;
            }
            alert(s);
        }
    }

    function getChecked() {
        var nodes = $('#tt').tree('getChecked');
        var s = '';
        for (var i = 0; i < nodes.length; i++) {
            if (s != '') s += ',';
            s += nodes[i].text;
        }
        alert(s);
    }

    function append(){
        var t = $('#tt');
        var node = t.tree('getSelected');
        t.tree('append', {
            parent: (node?node.target:null),
            data: [{
                text: 'new item1'
            },{
                text: 'new item2'
            }]
        });
    }
    function remove(){
        var node = $('#tt').tree('getSelected');
        $('#tt').tree('remove', node.target);
    }
    function collapse(){
        var node = $('#tt').tree('getSelected');
        $('#tt').tree('collapse',node.target);
    }
    function expand(){
        var node = $('#tt').tree('getSelected');
        $('#tt').tree('expand',node.target);
    }
</script>


<hr>
<div class="demo-info" style="font-size:20px;margin-top:10px">
    <div class="demo-tip icon-tip"></div>
    <div>树（Tree）组件get：</div>
</div>
<div style="font-size:18px">
    <ol>
        <li>简介：在网页中以树形结构显示分层数据。它向用户提供展开、折叠、拖拽、编辑和异步加载功能。</li>
        <li>用法：1.现有的ul转换为树。2.空ul通过url创建。</li>
        <li>依赖：draggable和droppable</li>
        <li>属性：
            <ol>
                <li>url：string。获取远程数据的 URL 。返回数据类型是jasonArray。
                    <ol>每个节点可以包括下列属性：
                        <li>id：string，节点的 id，它对于加载远程数据很重要。</li>
                        <li>text：string，要显示的节点文本。</li>
                        <li>state：string，默认值是'open'，节点状态。其值是'open' 或 'closed' 。</li>
                        <li>checked：boolean，默认值false，是否被选中行,父选中了，子就默认被选中，要配合checkbox属性使用。</li>
                        <li>iconCls：string，默认值父是文件、子是文件夹，节点图标。</li>
                        <li>attributes：json，给一个节点添加的自定义属性。</li>
                        <li>children：jsonArray，定义了一些子节点的节点数组。</li>
                    </ol>
                </li>
                <li>animate：boolean，默认值false。当节点展开折叠时是否显示动画效果。</li>
                <li>checkbox：boolean，默认值false。是否在每个节点前边显示复选框。</li>
                <li>cascadeCheck：boolean，默认值true。是否级联选中父节点。</li>
                <li>onlyLeafCheck：boolean，默认值false。是否只在叶节点前显示复选框。</li>
                <li>lines：boolean，默认值false。是否显示树线条。</li>
                <li>dnd：boolean	，默认值false。是否启用拖放。</li>
                <li>enableDnd：none，启用拖放功能。</li>
                <li>disableDnd：none	，禁用拖放功能。</li>


            </ol>
        </li>
        <li>事件：
            <ol>
                <li>onContextMenu：e, node。当右键点击节点时触发。</li>
            </ol>
        </li>
        <li>方法：
            <ol>
                <li>getChecked：[state]，获取复选框选中的节点s，返回时jsonArray。状态可用值有：'checked'、'unchecked'、'indeterminate'。如果状态未分配，则返回
                    'checked' 节点。需要配合复选框才能使用。
                </li>
                <li>getSelected：none。获取选中的节点并返回它，如果没有选中节点，则返回 null。</li>
                <li>collapseAll：none。折叠所有的节点。</li>
                <li>expandAll：none。展开所有的节点。</li>
                <li>find：id。找到指定的节点并返回该节点对象。</li>
                <li>expandTo：target。从根部展开一个指定的节点。</li>
                <li>select：target。选中一个节点。</li>
                append：param{parent：DOM 对象，要追加到的父节点，如果没有分配，则追加为根节点。data：数组，节点的数据。}。追加一些子节点到一个父节点
                <li>append：param{parent：DOM 对象，要追加到的父节点，如果没有分配，则追加为根节点。data：数组，节点的数据。}。追加一些子节点到一个父节点。</li>
                <li>remove：target。移除一个节点和它的子节点。</li>
                <li>collapse：target。折叠一个节点。</li>
                <li>expand：target。展开一个节点。</li>

            </ol>
        </li>
    </ol>
</div>

</body>
</html>
