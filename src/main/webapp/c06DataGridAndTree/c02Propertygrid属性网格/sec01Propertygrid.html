<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>属性网格（Propertygrid）组件的学习</title>
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.7.0/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.7.0/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.7.0/demo/demo.css">
    <script type="text/javascript" src="../../jquery-easyui-1.7.0/jquery.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.7.0/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.7.0/locale/easyui-lang-zh_CN.js"></script>
</head>
<body>

<h2>基本属性网格（Propertygrid）组件</h2>
<div class="demo-info" style="font-size:20px;margin-bottom: 10px">
    <div class="demo-tip icon-tip"></div>
    <div>点击行来改变每个属性值.</div>
</div>
<div style="margin:10px 0;">
    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="showGroup()">显示分组</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="hideGroup()">隐藏分组</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="showHeader()">显示头部</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="hideHeader()">隐藏头部</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="getChanges()">获取变化</a>
</div>
<table id="pg" class="easyui-propertygrid" style="width:300px"
       data-options="url:'./propertygrid_data1.json',showGroup:true
                    ,scrollbarSize:0
                    ,columns:myColumns
                    ,groupFormatter: groupFormatter"></table>

<script type="text/javascript">
    function showGroup() {
        $('#pg').propertygrid({
            showGroup: true
        });
    }

    function hideGroup() {
        $('#pg').propertygrid({
            showGroup: false
        });
    }

    function showHeader() {
        $('#pg').propertygrid({
            showHeader: true
        });
    }

    function hideHeader() {
        $('#pg').propertygrid({
            showHeader: false
        });
    }

    function getChanges() {
        var s = '';
        var rows = $('#pg').propertygrid('getChanges');
        if (rows == '') {
            alert('最后一次提交以来没有变化！');
            return;
        }
        for (var i = 0; i < rows.length; i++) {
            if (s == '') {
                s = rows[i].name + ':' + rows[i].value;
            } else {
                s = s + ',' + rows[i].name + ':' + rows[i].value;
            }

        }
        alert(s)
    }

    var myColumns = [[
        {field: 'name', title: '名称', width: 100, sortable: true},
        {field: 'value', title: '值', width: 100, resizable: false}
    ]];

    function groupFormatter(group, rows) {
        return group + ' - <span style="color:red">' + rows.length + ' 行</span>';
    }

</script>

<hr>
<div class="demo-info" style="font-size:20px;margin-top:10px">
    <div class="demo-tip icon-tip"></div>
    <div>链接按钮（Linkbutton）组件get：</div>
</div>
<div style="font-size:18px">
    <ol>
        <li>简介：2个列的分层列表，列是内置的，不需要再次声明。属性网格带有内置的排序和分组特征。</li>
        <li>用法：标记table中使用class创建一个属性网格'easyui-propertygrid'或者在空标记table使用 js 创建一个属性网格$('#pg').propertygrid({})。</li>
        <li>依赖：datagrid。</li>
        <li>属性：
            <ol>
                <li>url：string，数据网格的数据来源，属性行必须有4个字段，name：字段名。value：要被编辑的字段值。 group：组的字段值。 editor：编辑属性值的编辑器。</li>
                <li>showGroup：boolean，默认值false，是否显示属性组，属性组可以折叠或者展开同组的属性列表。</li>
                <li>showHeader：boolean，默认值true，是否显示行的头部。</li>
                <li>columns：array，默认配置name字段的title默认为name，value字段的title默认为value，可以通过重新配置改变。</li>
                <li>groupFormatter：function(group[组的字段名],rows[属于该组的行])。如何格式化组的值。</li>
            </ol>
        </li>
        <li>方法：
            <ol>
                <li>showHeader：boolean，默认值true，是否显示行的头部。</li>
                <li>showHeader：boolean，默认值true，是否显示行的头部。</li>
                <li>getChanges：type，可能的值是：inserted、deleted、updated，等等，当 type
                    参数没有分配时，返回最后一次提交（acceptChanges调用）以来所有改变的行。
                </li>

            </ol>
        </li>
    </ol>
</div>

</body>
</html>
